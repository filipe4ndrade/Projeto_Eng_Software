<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <%- include('partials/header') %>
    <title>Pacientes COVID-19 - Sistema de Triagem</title>
</head>
<body>
    <div class="container">
        <h1>Sistema de Triagem COVID-19</h1>
        
        <div class="card">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2>Lista de Pacientes</h2>
                <a href="/patients/new" class="button-primary">Novo Cadastro</a>
            </div>

            <% if (patients && patients.length > 0) { %>
                <div style="overflow-x: auto;">
                    <table>
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nome</th>
                                <th>Idade</th>
                                <th>Gênero</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% patients.forEach(patient => { %>
                                <tr>
                                    <td><strong><%= patient.id %></strong></td>
                                    <td><%= patient.name %></td>
                                    <td><%= patient.age %> anos</td>
                                    <td>
                                        <%= patient.gender === 'M' ? 'Masculino' : patient.gender === 'F' ? 'Feminino' : 'Outro' %>
                                    </td>
                                    <td>
                                        <a href="/patients/<%= patient.id %>/evaluate" class="button-link">
                                            Avaliar Risco
                                        </a>
                                        <button class="button-danger" onclick="deletePatient('<%= patient.id %>')">
                                            Excluir
                                        </button>
                                    </td>
                                </tr>
                            <% }) %>
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 15px; padding: 12px; background: #e9ecef; border-radius: 4px;">
                    <p><strong>Total de pacientes:</strong> <%= patients.length %></p>
                </div>
            <% } else { %>
                <div style="text-align: center; padding: 30px; background: #f8f9fa; border-radius: 4px; border: 1px solid #dee2e6;">
                    <h3 style="color: #6c757d; margin-bottom: 10px;">Nenhum paciente cadastrado</h3>
                    <p style="color: #6c757d; margin-bottom: 15px;">Comece adicionando o primeiro paciente ao sistema.</p>
                    <a href="/patients/new" class="button-primary">Cadastrar Primeiro Paciente</a>
                </div>
            <% } %>
        </div>
    </div>
    
    <script src="/js/script.js"></script>
</body>
</html>